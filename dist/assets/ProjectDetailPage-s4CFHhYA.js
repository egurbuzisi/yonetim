import{a as e,u as s,j as t,b as l}from"./index-CXP7xW6B.js";import{f as a,u as i,r}from"./react-vendor-DBkS_7n-.js";import{Y as n}from"./mahalleler-C9ogN-IT.js";import{O as d,Q as c,R as o,g as x,d as m,r as u,T as h,c as b,U as p,B as g,K as j,V as f,X as N,W as v,Y as w,Z as y}from"./icons-uH062rYu.js";function k(){const{id:k}=a(),C=i(),{projects:T,addProjectMessage:D,updateProjectMessage:M,deleteProjectMessage:z,updateProject:S,deleteProject:B,addNotification:G}=e(),{user:A}=s(),[R,$]=r.useState(""),[F,K]=r.useState(!1),[P,E]=r.useState(!1),[L,_]=r.useState(!1),[I,Y]=r.useState(!1),[U,H]=r.useState(!1),[O,V]=r.useState(null),[Q,W]=r.useState(null),[Z,q]=r.useState(null),[J,X]=r.useState(null),ee=r.useRef(null),se=r.useRef(null),te=r.useRef(null),le=r.useRef(null),[ae,ie]=r.useState({title:"",description:"",status:"devam_ediyor",startDate:"",targetDate:"",budget:"",responsible:"",mahalle:"",visibleTo:[]}),[re,ne]=r.useState(""),de=T.find(e=>e.id===k),ce=()=>{localStorage.setItem("activeTab","1"),C("/")},oe=()=>{de&&(ie({title:de.title,description:de.description,status:de.status,startDate:de.createdAt?new Date(de.createdAt).toISOString().split("T")[0]:"",targetDate:de.targetDate?new Date(de.targetDate).toISOString().split("T")[0]:"",budget:de.budget?.toString()||"",responsible:de.responsible||"",mahalle:de.mahalle||"",visibleTo:de.visibleTo||[]}),_(!0),K(!1))};r.useEffect(()=>{ee.current?.scrollIntoView({behavior:"smooth"})},[de?.messages.length]);if(!de)return t.jsx("div",{className:"h-[100dvh] flex items-center justify-center",children:t.jsx("p",{className:"text-slate-500",children:"Proje bulunamadÄ±"})});const xe=A&&["baskan","ozel_kalem","baskan_yardimcisi","mudur"].includes(A.role),me=e=>{const s=e.target.files?.[0];if(s){const e=new FileReader;e.onload=e=>{const s=document.createElement("img");s.onload=()=>{const e=document.createElement("canvas"),t=800;let l=s.width,a=s.height;l>a?l>t&&(a*=t/l,l=t):a>t&&(l*=t/a,a=t),e.width=l,e.height=a;const i=e.getContext("2d");i?.drawImage(s,0,0,l,a);const r=e.toDataURL("image/jpeg",.7);V(r)},s.src=e.target?.result},e.readAsDataURL(s)}e.target.value=""},ue=()=>{(R.trim()||O)&&A&&(D(de.id,R.trim(),A.id,A.name,O||void 0),$(""),V(null))},he=e=>new Date(e).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}),be=e=>{const s=new Date(e),t=new Date,l=Math.floor((t.getTime()-s.getTime())/864e5);return 0===l?s.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):1===l?"DÃ¼n":he(e)};return t.jsxs("div",{className:"h-[100dvh] bg-white flex flex-col",children:[t.jsxs("header",{className:"flex-shrink-0 bg-blue-900 text-white px-4 py-3 flex items-center justify-between safe-area-top",children:[t.jsx("button",{onClick:ce,className:"p-2 hover:bg-blue-800 rounded-lg",children:t.jsx(d,{className:"w-6 h-6"})}),t.jsx("h1",{className:"font-semibold text-lg flex-1 mx-4 truncate",children:de.title}),xe&&t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>K(!F),className:"p-2 hover:bg-blue-800 rounded-lg",children:t.jsx(c,{className:"w-6 h-6"})}),F&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>K(!1)}),t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl z-20 py-2 text-slate-700",children:[t.jsxs("button",{onClick:oe,className:"w-full px-4 py-2 text-left hover:bg-slate-50 flex items-center gap-2",children:[t.jsx(o,{className:"w-4 h-4"})," DÃ¼zenle"]}),t.jsxs("button",{onClick:()=>{E(!0),K(!1)},className:"w-full px-4 py-2 text-left hover:bg-slate-50 flex items-center gap-2",children:[t.jsx(x,{className:"w-4 h-4"})," GÃ¶rÃ¼nÃ¼rlÃ¼k"]}),t.jsxs("button",{onClick:()=>{Y(!0),K(!1)},className:"w-full px-4 py-2 text-left hover:bg-slate-50 flex items-center gap-2",children:[t.jsx(m,{className:"w-4 h-4"})," Bildirim GÃ¶nder"]}),t.jsxs("button",{onClick:()=>{S(de.id,{status:"tamamlandi"}),K(!1)},className:"w-full px-4 py-2 text-left hover:bg-slate-50 flex items-center gap-2",children:[t.jsx(u,{className:"w-4 h-4"})," TamamlandÄ±"]}),t.jsxs("button",{onClick:()=>{de&&window.confirm("Bu projeyi silmek istediÄŸinize emin misiniz?")&&(B(de.id),ce())},className:"w-full px-4 py-2 text-left hover:bg-slate-50 flex items-center gap-2 text-red-600",children:[t.jsx(h,{className:"w-4 h-4"})," Sil"]})]})]})]})]}),t.jsx("div",{className:"flex-shrink-0 p-4 border-b bg-slate-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"devam_ediyor":return"text-blue-600 bg-blue-100";case"tamamlandi":return"text-green-600 bg-green-100";case"beklemede":return"text-amber-600 bg-amber-100";default:return"text-slate-600 bg-slate-100"}})(de.status)}`,children:(e=>{switch(e){case"devam_ediyor":return"Devam Ediyor";case"tamamlandi":return"TamamlandÄ±";case"beklemede":return"Beklemede";default:return e}})(de.status)}),(()=>{if("devam_ediyor"!==de.status)return null;const e=new Date,s=new Date(de.createdAt),l=Math.floor((e.getTime()-s.getTime())/864e5),a=de.progress||0;return 0===a&&l>=30?t.jsxs("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-medium rounded-full animate-pulse flex items-center gap-1",children:["ðŸš¨ ",l,"g - %0 Ä°LERLEME!"]}):a<20&&l>=60?t.jsx("span",{className:"px-2 py-1 bg-amber-500 text-white text-xs font-medium rounded-full flex items-center gap-1",children:"â° Geride"}):null})()]}),xe&&t.jsx("button",{onClick:oe,className:"text-sm text-blue-600 hover:underline",children:"DÃ¼zenle"})]}),(()=>{if("devam_ediyor"!==de.status)return null;const e=new Date,s=new Date(de.createdAt),l=Math.floor((e.getTime()-s.getTime())/864e5),a=de.progress||0,i=Math.min(10*Math.floor(l/30),100),r=a<i&&l>30;return 0===a&&l>=30?t.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-xl flex items-center gap-3 animate-pulse",children:[t.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-2xl",children:"ðŸš¨"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm",children:"Ciddi Gecikme UyarÄ±sÄ±!"}),t.jsxs("p",{className:"text-xs text-red-100",children:["Bu proje ",l," gÃ¼ndÃ¼r devam ediyor ama hiÃ§ ilerleme yok (%0). Acil aksiyon gerekiyor!"]})]})]}):r?t.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-2xl",children:"â°"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm",children:"Ä°lerleme Geride!"}),t.jsxs("p",{className:"text-xs text-amber-100",children:[l," gÃ¼nde %",a," ilerleme (beklenen: ~%",i,")"]})]})]}):null})(),de.description&&t.jsx("p",{className:"text-slate-600 text-sm mb-4 leading-relaxed bg-slate-50 p-3 rounded-lg",children:de.description}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[t.jsx(b,{className:"w-4 h-4 text-blue-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400",children:"BaÅŸlangÄ±Ã§"}),t.jsx("p",{className:"font-medium text-xs",children:he(de.createdAt)})]})]}),de.targetDate&&t.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[t.jsx(b,{className:"w-4 h-4 text-amber-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400",children:"Hedef"}),t.jsx("p",{className:"font-medium text-xs",children:he(de.targetDate)})]})]}),de.budget&&t.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[t.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-green-600 font-bold text-xs",children:"â‚º"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400",children:"BÃ¼tÃ§e"}),t.jsxs("p",{className:"font-medium text-xs text-green-700",children:[de.budget.toLocaleString("tr-TR")," â‚º"]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[de.responsible&&t.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[t.jsx(p,{className:"w-4 h-4 text-indigo-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400",children:"Sorumlu"}),t.jsx("p",{className:"font-medium text-xs",children:de.responsible}),(()=>{const e=l.find(e=>e.name.toLowerCase()===de.responsible?.toLowerCase());return e?t.jsx("p",{className:"text-[10px] text-indigo-500",children:e.role}):null})()]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[t.jsx(x,{className:"w-4 h-4 text-purple-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400",children:"GÃ¶rÃ¼ntÃ¼leyen"}),t.jsxs("p",{className:"font-medium text-xs",children:[de.visibleTo.length," kiÅŸi"]})]})]}),de.mahalle&&t.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[t.jsx(g,{className:"w-4 h-4 text-rose-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400",children:"Mahalle"}),t.jsx("p",{className:"font-medium text-xs",children:de.mahalle})]})]})]}),t.jsxs("div",{className:"space-y-2 bg-gradient-to-br from-blue-50 to-indigo-50 p-2 rounded-lg",children:[(()=>{const e=new Date,s=new Date(de.createdAt),l=e.getTime()-s.getTime(),a=Math.floor(l/864e5),i=Math.floor(a/7),r=Math.floor(a/30),n=Math.floor(a/365);return t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-[10px] text-slate-500 font-medium mb-1",children:"ðŸ“… BaÅŸladÄ±ÄŸÄ±ndan Beri"}),t.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px]",children:[t.jsxs("div",{className:"bg-white rounded px-1 py-0.5",children:[t.jsx("span",{className:"font-bold text-blue-600",children:a}),t.jsx("span",{className:"text-slate-500",children:" gÃ¼n"})]}),t.jsxs("div",{className:"bg-white rounded px-1 py-0.5",children:[t.jsx("span",{className:"font-bold text-blue-600",children:i}),t.jsx("span",{className:"text-slate-500",children:" hafta"})]}),t.jsxs("div",{className:"bg-white rounded px-1 py-0.5",children:[t.jsx("span",{className:"font-bold text-blue-600",children:r}),t.jsx("span",{className:"text-slate-500",children:" ay"})]}),n>0&&t.jsxs("div",{className:"bg-white rounded px-1 py-0.5",children:[t.jsx("span",{className:"font-bold text-blue-600",children:n}),t.jsx("span",{className:"text-slate-500",children:" yÄ±l"})]})]})]})})(),de.targetDate&&(()=>{const e=new Date,s=new Date(de.targetDate).getTime()-e.getTime(),l=Math.floor(s/864e5),a=Math.floor(l/7),i=Math.floor(l/30),r=l<0;return t.jsxs("div",{className:"text-center mt-2 pt-2 border-t border-slate-200",children:[t.jsx("p",{className:"text-[10px] font-medium mb-1 "+(r?"text-red-500":"text-slate-500"),children:r?"âš ï¸ Gecikme":"â³ Bitmesine"}),t.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px]",children:[t.jsxs("div",{className:"rounded px-1 py-0.5 "+(r?"bg-red-50":"bg-white"),children:[t.jsx("span",{className:"font-bold "+(r?"text-red-600":"text-amber-600"),children:Math.abs(l)}),t.jsx("span",{className:"text-slate-500",children:" gÃ¼n"})]}),t.jsxs("div",{className:"rounded px-1 py-0.5 "+(r?"bg-red-50":"bg-white"),children:[t.jsx("span",{className:"font-bold "+(r?"text-red-600":"text-amber-600"),children:Math.abs(a)}),t.jsx("span",{className:"text-slate-500",children:" hafta"})]}),t.jsxs("div",{className:"rounded px-1 py-0.5 "+(r?"bg-red-50":"bg-white"),children:[t.jsx("span",{className:"font-bold "+(r?"text-red-600":"text-amber-600"),children:Math.abs(i)}),t.jsx("span",{className:"text-slate-500",children:" ay"})]})]})]})})()]})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Tamamlanma"}),t.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["%",de.progress||0]})]}),xe?t.jsx("button",{onClick:()=>H(!0),className:"w-full group",children:t.jsxs("div",{className:"h-6 bg-slate-200 rounded-full overflow-hidden relative group-hover:ring-2 group-hover:ring-blue-400 transition-all",children:[t.jsx("div",{className:"h-full rounded-full transition-all duration-500 "+(100===(de.progress||0)?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-blue-500 to-indigo-500"),style:{width:`${de.progress||0}%`}}),t.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-slate-600 group-hover:text-blue-700",children:"Ä°lerlemeyi gÃ¼ncellemek iÃ§in tÄ±klayÄ±n"})]})}):t.jsx("div",{className:"h-6 bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full transition-all duration-500 "+(100===(de.progress||0)?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-blue-500 to-indigo-500"),style:{width:`${de.progress||0}%`}})}),t.jsxs("div",{className:"flex justify-between mt-2 text-xs text-slate-400",children:[t.jsx("span",{children:"0%"}),t.jsx("span",{children:"25%"}),t.jsx("span",{children:"50%"}),t.jsx("span",{children:"75%"}),t.jsx("span",{children:"100%"})]})]})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[t.jsxs("h3",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(j,{className:"w-4 h-4"}),"Mesajlar / Durum GÃ¼ncellemeleri"]}),t.jsxs("div",{className:"space-y-3",children:[0===de.messages.length?t.jsx("p",{className:"text-slate-500 text-center py-8",children:"HenÃ¼z mesaj yok"}):de.messages.map(e=>{const s=A?.id===e.userId||"baskan"===A?.role||"ozel_kalem"===A?.role;return t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 relative group",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"font-medium text-slate-700",children:e.userName}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-slate-400",children:be(e.createdAt)}),s&&t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>X(J===e.id?null:e.id),className:"p-1 text-slate-400 hover:text-slate-600 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(c,{className:"w-4 h-4"})}),J===e.id&&t.jsxs("div",{className:"absolute right-0 top-6 bg-white rounded-lg shadow-lg border z-10 py-1 min-w-[120px]",children:[t.jsxs("button",{onClick:()=>{q({id:e.id,text:e.message||""}),X(null)},className:"w-full px-3 py-2 text-left text-sm hover:bg-slate-50 flex items-center gap-2",children:[t.jsx(o,{className:"w-4 h-4 text-blue-500"}),"DÃ¼zenle"]}),t.jsxs("button",{onClick:()=>{confirm("Bu mesajÄ± silmek istediÄŸinize emin misiniz?")&&z(de.id,e.id),X(null)},className:"w-full px-3 py-2 text-left text-sm hover:bg-red-50 text-red-600 flex items-center gap-2",children:[t.jsx(h,{className:"w-4 h-4"}),"Sil"]})]})]})]})]}),Z?.id===e.id?t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:Z.text,onChange:e=>q({...Z,text:e.target.value}),className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",autoFocus:!0}),t.jsx("button",{onClick:()=>{M(de.id,e.id,Z.text),q(null)},className:"px-3 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:"Kaydet"}),t.jsx("button",{onClick:()=>q(null),className:"px-3 py-2 bg-slate-200 text-slate-600 rounded-lg text-sm hover:bg-slate-300",children:"Ä°ptal"})]}):t.jsx(t.Fragment,{children:e.message&&t.jsx("p",{className:"text-slate-600 text-sm",children:e.message})}),e.image&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:e.image,alt:"Ek",className:"rounded-lg max-w-full max-h-48 object-cover cursor-pointer",onClick:()=>W(e.image)})}),e.attachment&&t.jsxs("div",{className:"mt-2 flex items-center gap-1 text-blue-600 text-sm",children:[t.jsx(f,{className:"w-4 h-4"}),t.jsx("span",{children:e.attachment})]})]},e.id)}),t.jsx("div",{ref:ee})]})]}),O&&t.jsx("div",{className:"flex-shrink-0 px-4 py-2 bg-slate-50 border-t",children:t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:O,alt:"SeÃ§ilen",className:"h-20 rounded-lg object-cover"}),t.jsx("button",{onClick:()=>V(null),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center",children:t.jsx(N,{className:"w-4 h-4"})})]})}),t.jsx("div",{className:"flex-shrink-0 p-4 border-t bg-white pb-safe",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{ref:te,type:"file",accept:"image/*",onChange:me,className:"hidden"}),t.jsx("input",{ref:le,type:"file",accept:"image/*",capture:"environment",onChange:me,className:"hidden"}),t.jsx("button",{onClick:()=>le.current?.click(),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"FotoÄŸraf Ã‡ek",children:t.jsx(v,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>te.current?.click(),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Galeriden SeÃ§",children:t.jsx(w,{className:"w-5 h-5"})}),t.jsx("input",{ref:se,type:"text",value:R,onChange:e=>$(e.target.value),onFocus:()=>{setTimeout(()=>{se.current?.scrollIntoView({behavior:"smooth",block:"center"})},300)},onKeyPress:e=>"Enter"===e.key&&ue(),placeholder:"Mesaj yaz...",className:"flex-1 px-4 py-3 bg-slate-100 rounded-full outline-none focus:ring-2 focus:ring-blue-500 text-base"}),t.jsx("button",{onClick:ue,disabled:!R.trim()&&!O,className:"p-3 bg-blue-900 text-white rounded-full disabled:opacity-50",children:t.jsx(y,{className:"w-5 h-5"})})]})}),Q&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",onClick:()=>W(null),children:[t.jsx("button",{className:"absolute top-4 right-4 p-2 text-white",onClick:()=>W(null),children:t.jsx(N,{className:"w-8 h-8"})}),t.jsx("img",{src:Q,alt:"BÃ¼yÃ¼k gÃ¶rÃ¼ntÃ¼",className:"max-w-full max-h-full object-contain p-4"})]})}),P&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>E(!1)}),t.jsxs("div",{className:"fixed inset-x-4 top-1/2 -translate-y-1/2 bg-white rounded-2xl z-50 max-h-[80vh] overflow-y-auto",children:[t.jsx("div",{className:"p-4 border-b",children:t.jsx("h3",{className:"font-semibold text-lg",children:"Kimler GÃ¶rebilsin?"})}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"BaÅŸkan"}),l.filter(e=>"BaÅŸkan"===e.role).map(e=>t.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded-lg cursor-pointer",children:[t.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5 rounded text-blue-600"}),t.jsx("span",{className:"text-slate-700",children:e.name})]},e.id))]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Ã–zel Kalem"}),l.filter(e=>"Ã–zel Kalem MÃ¼dÃ¼rÃ¼"===e.role).map(e=>t.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded-lg cursor-pointer",children:[t.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5 rounded text-blue-600"}),t.jsx("span",{className:"text-slate-700",children:e.name})]},e.id))]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"BaÅŸkan YardÄ±mcÄ±larÄ±"}),l.filter(e=>"BÅŸk. Yrd."===e.role).map(e=>t.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded-lg cursor-pointer",children:[t.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5 rounded text-blue-600"}),t.jsx("span",{className:"text-slate-700",children:e.name})]},e.id))]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"MÃ¼dÃ¼rler"}),t.jsx("div",{className:"max-h-48 overflow-y-auto",children:l.filter(e=>e.role.includes("Md.")).map(e=>t.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded-lg cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-blue-600"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-700 block",children:e.name}),t.jsx("span",{className:"text-xs text-slate-400",children:e.role})]})]},e.id))})]})]}),t.jsxs("div",{className:"p-4 border-t flex gap-2",children:[t.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-3 border rounded-xl hover:bg-slate-50",children:"Ä°ptal"}),t.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-3 bg-blue-900 text-white rounded-xl",children:"Kaydet"})]})]})]}),L&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>_(!1)}),t.jsxs("div",{className:"fixed inset-x-4 top-1/2 -translate-y-1/2 bg-white rounded-2xl z-50 max-h-[85vh] overflow-y-auto",children:[t.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Projeyi DÃ¼zenle"}),t.jsx("button",{onClick:()=>_(!1),className:"p-1 hover:bg-slate-100 rounded",children:t.jsx(N,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Proje AdÄ±"}),t.jsx("input",{type:"text",value:ae.title,onChange:e=>ie({...ae,title:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"AÃ§Ä±klama"}),t.jsx("textarea",{value:ae.description,onChange:e=>ie({...ae,description:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durum"}),t.jsxs("select",{value:ae.status,onChange:e=>ie({...ae,status:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[t.jsx("option",{value:"beklemede",children:"Beklemede"}),t.jsx("option",{value:"devam_ediyor",children:"Devam Ediyor"}),t.jsx("option",{value:"tamamlandi",children:"TamamlandÄ±"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"BaÅŸlangÄ±Ã§ Tarihi"}),t.jsx("input",{type:"date",value:ae.startDate,onChange:e=>ie({...ae,startDate:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hedef Tarih"}),t.jsx("input",{type:"date",value:ae.targetDate,onChange:e=>ie({...ae,targetDate:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"BÃ¼tÃ§e (â‚º)"}),t.jsx("input",{type:"number",value:ae.budget,onChange:e=>ie({...ae,budget:e.target.value}),placeholder:"500000",className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sorumlu KiÅŸi"}),t.jsx("input",{type:"text",value:ae.responsible,onChange:e=>ie({...ae,responsible:e.target.value}),placeholder:"Ä°sim...",className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Mahalle"}),t.jsxs("select",{value:ae.mahalle,onChange:e=>ie({...ae,mahalle:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[t.jsx("option",{value:"",children:"Mahalle SeÃ§in..."}),n.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["ðŸ‘ï¸ Kimler GÃ¶rebilsin? (",ae.visibleTo.length," kiÅŸi seÃ§ili)"]}),t.jsxs("div",{className:"border border-slate-300 rounded-xl p-3 max-h-48 overflow-y-auto bg-slate-50",children:[["BaÅŸkan","Ã–zel Kalem MÃ¼dÃ¼rÃ¼","BÅŸk. Yrd."].map(e=>{const s=l.filter(s=>s.role===e);return 0===s.length?null:t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:e}),s.map(e=>t.jsxs("label",{className:"flex items-center gap-2 py-1 px-2 hover:bg-white rounded cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:ae.visibleTo.includes(e.id),onChange:s=>{s.target.checked?ie({...ae,visibleTo:[...ae.visibleTo,e.id]}):ie({...ae,visibleTo:ae.visibleTo.filter(s=>s!==e.id)})},className:"w-4 h-4 rounded text-blue-600"}),t.jsx("span",{className:"text-sm text-slate-700",children:e.name})]},e.id))]},e)}),t.jsxs("div",{className:"mb-2",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"MÃ¼dÃ¼rler"}),l.filter(e=>e.role.includes("Md.")).map(e=>t.jsxs("label",{className:"flex items-center gap-2 py-1 px-2 hover:bg-white rounded cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:ae.visibleTo.includes(e.id),onChange:s=>{s.target.checked?ie({...ae,visibleTo:[...ae.visibleTo,e.id]}):ie({...ae,visibleTo:ae.visibleTo.filter(s=>s!==e.id)})},className:"w-4 h-4 rounded text-blue-600"}),t.jsx("span",{className:"text-sm text-slate-700",children:e.name}),t.jsxs("span",{className:"text-[10px] text-slate-400",children:["(",e.role,")"]})]},e.id))]})]}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("button",{type:"button",onClick:()=>ie({...ae,visibleTo:l.map(e=>e.id)}),className:"text-xs px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:"TÃ¼mÃ¼nÃ¼ SeÃ§"}),t.jsx("button",{type:"button",onClick:()=>ie({...ae,visibleTo:[]}),className:"text-xs px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200",children:"Temizle"}),t.jsx("button",{type:"button",onClick:()=>{const e=l.filter(e=>e.role.includes("Md.")).map(e=>e.id);ie({...ae,visibleTo:[...new Set([...ae.visibleTo,...e])]})},className:"text-xs px-3 py-1.5 bg-green-100 text-green-700 rounded-lg hover:bg-green-200",children:"TÃ¼m MÃ¼dÃ¼rler"})]})]})]}),t.jsxs("div",{className:"p-4 border-t flex gap-2",children:[t.jsx("button",{onClick:()=>_(!1),className:"flex-1 py-3 border rounded-xl hover:bg-slate-50",children:"Ä°ptal"}),t.jsx("button",{onClick:()=>{if(!de||!A)return;const e=ae.visibleTo.filter(e=>!de.visibleTo.includes(e));S(de.id,{title:ae.title.trim(),description:ae.description.trim(),status:ae.status,createdAt:ae.startDate?new Date(ae.startDate):de.createdAt,targetDate:ae.targetDate?new Date(ae.targetDate):void 0,budget:ae.budget?parseFloat(ae.budget):void 0,responsible:ae.responsible.trim()||void 0,mahalle:ae.mahalle.trim()||void 0,visibleTo:ae.visibleTo}),e.forEach(e=>{const s=l.find(s=>s.id===e);s&&G({type:"proje",title:"Proje PaylaÅŸÄ±mÄ±",message:`${A.name}; ${s.role} (${s.name}) ${de.title} projesi iÃ§in gÃ¶revlendirdi`,link:`/proje/${de.id}`})}),_(!1)},className:"flex-1 py-3 bg-blue-900 text-white rounded-xl",children:"Kaydet"})]})]})]}),I&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>Y(!1)}),t.jsxs("div",{className:"fixed inset-x-4 top-1/2 -translate-y-1/2 bg-white rounded-2xl z-50",children:[t.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Bildirim GÃ¶nder"}),t.jsx("button",{onClick:()=>Y(!1),className:"p-1 hover:bg-slate-100 rounded",children:t.jsx(N,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("p",{className:"text-sm text-slate-500 mb-3",children:["Bu proje iÃ§in ",de.visibleTo.length," kiÅŸiye bildirim gÃ¶nderilecek."]}),t.jsx("textarea",{value:re,onChange:e=>ne(e.target.value),placeholder:"Bildirim mesajÄ± yazÄ±n...",rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),t.jsxs("div",{className:"p-4 border-t flex gap-2",children:[t.jsx("button",{onClick:()=>Y(!1),className:"flex-1 py-3 border rounded-xl hover:bg-slate-50",children:"Ä°ptal"}),t.jsxs("button",{onClick:()=>{re.trim()&&de&&A&&(D(de.id,`ðŸ“¢ BÄ°LDÄ°RÄ°M: ${re.trim()}`,A.id,A.name),alert(`Bildirim ${de.visibleTo.length} kiÅŸiye gÃ¶nderildi!`),ne(""),Y(!1))},disabled:!re.trim(),className:"flex-1 py-3 bg-blue-900 text-white rounded-xl disabled:opacity-50",children:[t.jsx(m,{className:"w-4 h-4 inline mr-2"}),"GÃ¶nder"]})]})]})]}),U&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>H(!1)}),t.jsxs("div",{className:"fixed inset-x-4 top-1/2 -translate-y-1/2 bg-white rounded-2xl z-50",children:[t.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Ä°lerleme GÃ¼ncelle"}),t.jsx("button",{onClick:()=>H(!1),className:"p-1 hover:bg-slate-100 rounded",children:t.jsx(N,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Proje tamamlanma yÃ¼zdesini seÃ§in:"}),t.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-4",children:[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100].map(e=>t.jsxs("button",{onClick:()=>{S(de.id,{progress:e}),100===e&&S(de.id,{status:"tamamlandi"}),H(!1)},className:`py-2 rounded-lg text-sm font-medium transition-all ${(de.progress||0)===e?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"} ${100===e?"col-span-5 bg-green-500 hover:bg-green-600 text-white":""}`,children:["%",e]},e))}),t.jsxs("div",{className:"mt-4 p-3 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex justify-between mb-2 text-sm",children:[t.jsx("span",{className:"text-slate-600",children:"Mevcut Ä°lerleme"}),t.jsxs("span",{className:"font-bold text-blue-600",children:["%",de.progress||0]})]}),t.jsx("div",{className:"h-3 bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full transition-all",style:{width:`${de.progress||0}%`}})})]})]}),t.jsx("div",{className:"p-4 border-t",children:t.jsx("button",{onClick:()=>H(!1),className:"w-full py-3 border rounded-xl hover:bg-slate-50",children:"Kapat"})})]})]})]})}export{k as default};
