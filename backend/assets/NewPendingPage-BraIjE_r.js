import{a as e,u as l,j as t,b as s}from"./index-CXP7xW6B.js";import{u as a,r}from"./react-vendor-DBkS_7n-.js";import{Y as i}from"./mahalleler-C9ogN-IT.js";import{O as n,_ as o,c as d,b as c,s as u,X as x,W as m,Y as b,n as p,g as h}from"./icons-uH062rYu.js";function g(){const g=a(),{addPendingTask:f,addScheduleItem:j}=e(),{user:v}=l(),[N,k]=r.useState(""),[w,y]=r.useState("talep"),[C,S]=r.useState(""),[T,D]=r.useState(""),[B,M]=r.useState(""),[Y,q]=r.useState(""),[R,X]=r.useState(""),[z]=r.useState("bekliyor"),[K,A]=r.useState([]),[E,I]=r.useState([]),[O,P]=r.useState(""),[F,G]=r.useState("19:00"),[L,U]=r.useState(""),$=r.useRef(null),V=r.useRef(null),W=e=>{const l=e.target.files?.[0];if(l){const e=new FileReader;e.onload=e=>{const l=document.createElement("img");l.onload=()=>{const e=document.createElement("canvas"),t=800;let s=l.width,a=l.height;s>a?s>t&&(a*=t/s,s=t):a>t&&(s*=t/a,a=t),e.width=s,e.height=a;const r=e.getContext("2d");r?.drawImage(l,0,0,s,a);const i=e.toDataURL("image/jpeg",.7);A(e=>[...e,i])},l.src=e.target?.result},e.readAsDataURL(l)}e.target.value=""},_=e=>{if(e.preventDefault(),!N.trim())return void alert("Ä°ÅŸ baÅŸlÄ±ÄŸÄ± gerekli!");if("dugun"===w&&!O)return void alert("DÃ¼ÄŸÃ¼n iÃ§in tarih seÃ§melisiniz!");const l=[...new Set([...E,...Y?[Y]:[]])];if("dugun"===w&&O)return j({title:`ðŸ’’ ${N.trim()}`,type:"dugun",date:new Date(O),startTime:F||"19:00",location:L||R||"",description:C.trim(),createdBy:v?.id||"",visibleTo:[]}),f({title:N.trim(),type:w,description:C.trim(),requesterName:T||void 0,requesterPhone:B||void 0,requestedDate:new Date,status:"tamamlandi",scheduledDate:new Date(O),scheduledTime:F,location:L||R||void 0,assignedTo:Y||void 0,mahalle:R||void 0,createdBy:v?.id||"",visibleTo:l}),localStorage.setItem("activeTab","4"),void g("/");f({title:N.trim(),type:w,description:C.trim(),requesterName:T||void 0,requesterPhone:B||void 0,requestedDate:new Date,status:Y?"planlanmis":z,assignedTo:Y||void 0,mahalle:R||void 0,createdBy:v?.id||"",visibleTo:l}),localStorage.setItem("activeTab","3"),g("/")},H=e=>{I(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e])};return t.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[t.jsxs("header",{className:"flex-shrink-0 bg-blue-900 text-white px-4 py-3 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>g(-1),className:"p-2 hover:bg-blue-800 rounded-lg",children:t.jsx(n,{className:"w-6 h-6"})}),t.jsx("h1",{className:"font-semibold text-lg",children:"Yeni Ä°ÅŸ Ekle"}),t.jsx("button",{onClick:_,className:"p-2 hover:bg-blue-800 rounded-lg",children:t.jsx(o,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:_,className:"flex-1 p-4 space-y-4 overflow-y-auto",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ä°ÅŸ BaÅŸlÄ±ÄŸÄ± *"}),t.jsx("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:"Ã–rn: Randevu: Mehmet YÄ±lmaz",className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ä°ÅŸ TÃ¼rÃ¼"}),t.jsxs("select",{value:w,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",children:[t.jsx("option",{value:"randevu",children:"ðŸ“… Randevu Talebi"}),t.jsx("option",{value:"dugun",children:"ðŸ’’ DÃ¼ÄŸÃ¼n/Nikah"}),t.jsx("option",{value:"talep",children:"ðŸ“‹ VatandaÅŸ Talebi"}),t.jsx("option",{value:"proje",children:"ðŸ—ï¸ Proje Ä°ÅŸi"}),t.jsx("option",{value:"diger",children:"ðŸ“ DiÄŸer"})]})]}),"dugun"===w&&t.jsxs("div",{className:"bg-pink-50 rounded-xl p-4 border border-pink-200",children:[t.jsxs("h3",{className:"text-sm font-semibold text-pink-700 mb-3 flex items-center gap-2",children:["ðŸ’’ DÃ¼ÄŸÃ¼n Bilgileri",t.jsx("span",{className:"text-xs font-normal text-pink-500",children:"(Otomatik programa eklenir)"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:[t.jsx(d,{className:"w-3 h-3 inline mr-1"}),"DÃ¼ÄŸÃ¼n Tarihi *"]}),t.jsx("input",{type:"date",value:O,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none text-sm",required:"dugun"===w})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:[t.jsx(c,{className:"w-3 h-3 inline mr-1"}),"Saat"]}),t.jsx("input",{type:"time",value:F,onChange:e=>G(e.target.value),className:"w-full px-3 py-2 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none text-sm"})]})]}),t.jsxs("div",{className:"mt-3",children:[t.jsxs("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:[t.jsx(u,{className:"w-3 h-3 inline mr-1"}),"DÃ¼ÄŸÃ¼n Salonu / MekanÄ±"]}),t.jsx("input",{type:"text",value:L,onChange:e=>U(e.target.value),placeholder:"Ã–rn: YÄ±ldÄ±rÄ±m Belediyesi Nikah Salonu",className:"w-full px-3 py-2 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none text-sm"})]}),t.jsx("p",{className:"text-xs text-pink-500 mt-2",children:"âœ“ DÃ¼ÄŸÃ¼n otomatik olarak programa eklenecek ve bekleyen listesinde gÃ¶rÃ¼nmeyecek"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"AÃ§Ä±klama"}),t.jsx("textarea",{value:C,onChange:e=>S(e.target.value),placeholder:"Ä°ÅŸ hakkÄ±nda detaylÄ± aÃ§Ä±klama...",rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[t.jsx(u,{className:"w-4 h-4 inline mr-1"}),"Mahalle"]}),t.jsxs("select",{value:R,onChange:e=>X(e.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",children:[t.jsx("option",{value:"",children:"Mahalle SeÃ§in..."}),i.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"FotoÄŸraflar"}),t.jsx("input",{ref:$,type:"file",accept:"image/*",onChange:W,className:"hidden"}),t.jsx("input",{ref:V,type:"file",accept:"image/*",capture:"environment",onChange:W,className:"hidden"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[K.map((e,l)=>t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:e,alt:`FotoÄŸraf ${l+1}`,className:"w-20 h-20 object-cover rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>(e=>{A(l=>l.filter((l,t)=>t!==e))})(l),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center",children:t.jsx(x,{className:"w-4 h-4"})})]},l)),t.jsxs("button",{type:"button",onClick:()=>V.current?.click(),className:"w-20 h-20 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center text-slate-400 hover:border-blue-500 hover:text-blue-500 transition-colors",children:[t.jsx(m,{className:"w-6 h-6"}),t.jsx("span",{className:"text-xs mt-1",children:"Ã‡ek"})]}),t.jsxs("button",{type:"button",onClick:()=>$.current?.click(),className:"w-20 h-20 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center text-slate-400 hover:border-blue-500 hover:text-blue-500 transition-colors",children:[t.jsx(b,{className:"w-6 h-6"}),t.jsx("span",{className:"text-xs mt-1",children:"Galeri"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[t.jsx(p,{className:"w-4 h-4 inline mr-1"}),"KiÅŸiye Ata (Opsiyonel)"]}),t.jsxs("select",{value:Y,onChange:e=>q(e.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white",children:[t.jsx("option",{value:"",children:"-- Atama Yapma --"}),t.jsx("optgroup",{label:"BaÅŸkanlÄ±k",children:s.filter(e=>["BaÅŸkan","Ã–zel Kalem"].includes(e.role)).map(e=>t.jsxs("option",{value:e.id,children:[e.name," - ",e.role]},e.id))}),t.jsx("optgroup",{label:"BaÅŸkan YardÄ±mcÄ±larÄ±",children:s.filter(e=>e.role.includes("BÅŸk. Yrd.")).map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))}),t.jsx("optgroup",{label:"MÃ¼dÃ¼rler",children:s.filter(e=>e.role.includes("Md.")).map(e=>t.jsxs("option",{value:e.id,children:[e.name," - ",e.role]},e.id))}),t.jsx("optgroup",{label:"MÃ¼hendisler",children:s.filter(e=>"MÃ¼hendis"===e.role).map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))}),t.jsx("optgroup",{label:"Ã‡alÄ±ÅŸanlar",children:s.filter(e=>"Ã‡alÄ±ÅŸan"===e.role).map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))})]}),Y&&t.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"âœ“ Atanan kiÅŸi bu iÅŸi gÃ¶rebilecek"})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:[t.jsx(h,{className:"w-4 h-4 inline mr-1"}),"Kimler GÃ¶rebilsin? (",E.length," kiÅŸi seÃ§ili)"]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[t.jsx("button",{type:"button",onClick:()=>I(s.map(e=>e.id)),className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:"TÃ¼mÃ¼nÃ¼ SeÃ§"}),t.jsx("button",{type:"button",onClick:()=>I([]),className:"px-3 py-1 text-xs bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:"Temizle"}),t.jsx("button",{type:"button",onClick:()=>{const e=s.filter(e=>e.role.includes("Md.")).map(e=>e.id);I(l=>[...new Set([...l,...e])])},className:"px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200",children:"TÃ¼m MÃ¼dÃ¼rler"})]}),t.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"BaÅŸkanlÄ±k"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:s.filter(e=>["BaÅŸkan","Ã–zel Kalem"].includes(e.role)).map(e=>t.jsx("button",{type:"button",onClick:()=>H(e.id),className:"px-2 py-1 text-xs rounded-lg transition-colors "+(E.includes(e.id)?"bg-blue-500 text-white":"bg-white border border-slate-200 text-slate-600 hover:border-blue-300"),children:e.name.split(" ")[0]},e.id))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"BaÅŸkan YardÄ±mcÄ±larÄ±"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:s.filter(e=>e.role.includes("BÅŸk. Yrd.")).map(e=>t.jsx("button",{type:"button",onClick:()=>H(e.id),className:"px-2 py-1 text-xs rounded-lg transition-colors "+(E.includes(e.id)?"bg-green-500 text-white":"bg-white border border-slate-200 text-slate-600 hover:border-green-300"),children:e.name.split(" ")[0]},e.id))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"MÃ¼dÃ¼rler"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:s.filter(e=>e.role.includes("Md.")).map(e=>t.jsx("button",{type:"button",onClick:()=>H(e.id),className:"px-2 py-1 text-xs rounded-lg transition-colors "+(E.includes(e.id)?"bg-purple-500 text-white":"bg-white border border-slate-200 text-slate-600 hover:border-purple-300"),children:e.name.split(" ")[0]},e.id))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"MÃ¼hendisler & Ã‡alÄ±ÅŸanlar"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:s.filter(e=>["MÃ¼hendis","Ã‡alÄ±ÅŸan"].includes(e.role)).map(e=>t.jsx("button",{type:"button",onClick:()=>H(e.id),className:"px-2 py-1 text-xs rounded-lg transition-colors "+(E.includes(e.id)?"bg-amber-500 text-white":"bg-white border border-slate-200 text-slate-600 hover:border-amber-300"),children:e.name.split(" ")[0]},e.id))})]})]}),t.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"â„¹ï¸ Sadece seÃ§ilen kiÅŸiler ve oluÅŸturan gÃ¶rebilir"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Talep Eden KiÅŸi"}),t.jsx("input",{type:"text",value:T,onChange:e=>D(e.target.value),placeholder:"KiÅŸi adÄ±...",className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Telefon NumarasÄ±"}),t.jsx("input",{type:"tel",value:B,onChange:e=>M(e.target.value),placeholder:"0532 XXX XX XX",className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),t.jsx("button",{type:"submit",className:"w-full py-4 bg-blue-900 text-white font-semibold rounded-xl hover:bg-blue-800 transition-colors mt-6",children:"Ä°ÅŸ OluÅŸtur"})]})]})}export{g as default};
